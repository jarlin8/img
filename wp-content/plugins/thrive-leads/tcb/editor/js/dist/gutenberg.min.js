!function(t){const e={isGutenbergActive:function(){return"undefined"!=typeof wp&&void 0!==wp.blocks},init:function(){const e=this;this.$gutenberg=t("#editor"),this.$architectNotificationContent=t("#thrive-gutenberg-switch").html(),this.$architectDisplay=t('<div id="tar-display">').append(this.$architectNotificationContent),this.$architectLauncher=this.$architectDisplay.find("#thrive_preview_button"),this.isPostBox=-1!==this.$architectNotificationContent.indexOf("postbox"),t(window).on("storage.tcb",(function(t){const e=wp.data.select("core/editor").getCurrentPost();let i;try{i=JSON.parse(t.originalEvent.newValue)}catch(t){}i&&i.ID&&"tve_post_options_change"===t.originalEvent.key&&i.ID===Number(e.id)&&window.location.reload()})),wp.data.subscribe((function(){const t=wp.data.select("core/editor");if(t){const e=t.isSavingPost(),i=t.isAutosavingPost();if(e&&!i){const e=JSON.stringify(t.getCurrentPost());window.localStorage.setItem("tve_post_options_change",e)}}setTimeout((function(){e.render()}),1)}))},render:function(){const e=this;let i=!1;if(this.isPostBox){if(!t("#tar-display").length){const t=this.$gutenberg.find(".editor-post-title");t.length&&("DIV"===t[0].tagName?t.append(this.$architectDisplay):t.after(this.$architectDisplay)),this.$gutenberg.find(".editor-block-list__layout,.block-editor-block-list__layout").hide(),this.$gutenberg.find(".editor-post-title__block").css("margin-bottom","0"),this.$gutenberg.find(".editor-writing-flow__click-redirect,.block-editor-writing-flow__click-redirect").hide(),this.$gutenberg.find(".edit-post-header-toolbar").css("visibility","hidden"),i=!0}}else t("#thrive_preview_button").length||(this.$gutenberg.find(".edit-post-header-toolbar").append(this.$architectLauncher),this.$architectLauncher.on("click",(function(){e.$gutenberg.find(".editor-block-list__layout").hide()})),this.$gutenberg.find(".edit-post-header-toolbar").css("visibility","visible"),i=!0);t(".editor-block-list__layout,.block-editor-block-list__layout").addClass("tcb-style-wrap"),i&&this.bindEvents()},bindEvents:function(){const e=this;t("#tcb2-show-wp-editor").on("click",(function(){const i=e.$gutenberg.find(".tcb-enable-editor").closest(".postbox");t.ajax({type:"post",url:ajaxurl,dataType:"json",data:{_nonce:TCB_Post_Edit_Data.admin_nonce,post_id:this.getAttribute("data-id"),action:"tcb_admin_ajax_controller",route:"disable_tcb"}}),i.next(".tcb-flags").find("input").prop("disabled",!1),i.remove(),e.$gutenberg.find(".editor-block-list__layout,.block-editor-block-list__layout").show(),e.isPostBox=!1,e.render(),e.fixBlocksPreview()})),this.$architectLauncher.on("click",(function(){t.ajax({type:"post",url:ajaxurl,dataType:"json",data:{_nonce:TCB_Post_Edit_Data.admin_nonce,post_id:this.getAttribute("data-id"),action:"tcb_admin_ajax_controller",route:"change_post_status_gutenberg"}})}))},fixBlocksPreview:function(){const t=document.querySelectorAll('[data-type*="thrive"] iframe');Array.prototype.forEach.call(t,(function(t){const e=t.contentDocument;t.style.setProperty("height",""),t.parentNode.style.setProperty("height",""),Array.prototype.forEach.call(e.body.querySelectorAll(".tve-countdown"),(function(t){t.style.setProperty("--tve-countdown-size","")}));const i=function(t){if(!t)return 0;let e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop)+parseInt(i.marginBottom),e}(e.body);t.style.setProperty("height",i+"px"),t.parentNode.style.setProperty("height",i+"px")}))}};t((function(){e.isGutenbergActive()&&e.init(),window.addEventListener("load",(function(){t(".tcb-revert").on("click",(function(){confirm("Are you sure you want to DELETE all of the content that was created in this landing page and revert to the theme page? \n If you click OK, any custom content you added to the landing page will be deleted.")&&(location.href=location.href+"&tve_revert_theme=1&nonce="+this.dataset.nonce,t("#editor").find(".edit-post-header-toolbar").css("visibility","visible"))}))}))}))}(jQuery);