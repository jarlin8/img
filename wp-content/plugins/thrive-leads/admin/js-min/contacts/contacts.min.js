(()=>{var t;(t=jQuery)(document).ready((function(){ThriveLeads.router.navigate("#contacts",{trigger:!0}),t(".tve-manager-download-button").on("click",(function(){var a=t(this),e=a.parents(".tve-download-row").find(".tve-manager-source option:selected").val(),n=a.parents(".tve-download-row").find(".tve-manager-type option:selected").val(),d=t('<li class="tvd-collection-item"><div class="tvd-row"><div class="tvd-col tvd-s3"><span class="tvd-vertical-align">'+a.parents(".tve-download-row").find(".tve-manager-source option:selected").text()+'</span></div><div class="tvd-col tvd-s3"><span class="tvd-vertical-align">Now</span></div><div class="tvd-col tvd-s3 tve-status"><span class="tvd-vertical-align"><span class="tvd-vertical-align">Pending</span></span></div><div class="tvd-col tvd-s3 tve-action">'+t(".tve-pending-spinner").parent().html()+'</div></div></li>"'),o={start_date:t(".tve-contacts-start-date").val(),end_date:t(".tve-contacts-end-date").val(),source:t("#tve-contacts-source").val()};t(".tve-downloads-table .tvd-collection-header").after(d),t.ajax({method:"POST",url:ajaxurl,dataType:"json",data:{action:"thrive_leads_backend_ajax",route:"contacts",actionType:"download",source:e,type:n,params:o,security:ThriveLeadsConst.security}}).done((function(t){d.find(".tve-status").html('<span class="tvd-vertical-align">'+t.response+"</span>"),d.find(".tve-action").empty().append('<div class="tvd-right"><a href="'+t.link+'" class="tvd-btn-icon tvd-btn-icon-green tvd-no-load tvd-tooltipped" data-tooltip="Download Report" data-position="top"><span class="tvd-icon-cloud-download"></span><span class="tvd-on-large-and-down">&nbsp;Download</span></a>&nbsp;<a data-id="'+t.id+'" class="tvd-btn-icon tvd-btn-icon-red tve-delete-download tvd-pointer tvd-tooltipped" data-tooltip="Delete Report" data-position="top"><span class="tvd-icon-delete2"></span><span class="tvd-on-large-and-down">&nbsp;Delete</span></a></div>')})).fail((function(t){500==t.status&&(d.find(".tve-status").html('<span class="tve-error">'+t.statusText+"</span>"),d.find(".tve-action").html("You might have a memory limit on your server. Please contact your host!"))}))})),t(document).on("click",".tve-delete-download",(function(){var a=t(this).attr("data-id"),e=t(this),n=e.parents("li.tvd-collection-item");e.parent().html(t(".tve-pending-spinner").parent().html()),t.ajax({method:"POST",url:ajaxurl,data:{id:a,action:"thrive_leads_backend_ajax",route:"contacts",actionType:"delete-download",security:ThriveLeadsConst.security}}).done((function(t){n.remove()}))})),t(".tve-contacts-start-date").pickadate({format:"yyyy-mm-dd"}),t(".tve-contacts-end-date").pickadate({format:"yyyy-mm-dd"}),t(".tve-contacts-source").change((function(){t(".tve-contacts-source").val(t(this).val())})),t(".tve-contacts-per-page").change((function(){t(".tve-contacts-per-page").val(t(this).val())})),t("#ui-datepicker-div").hide(),t(".tvd-delete").click((function(a){return t("#tve-leads-delete-contact").openModal({out_duration:0,ready:function(){var e=a.currentTarget.href;t("#tve-leads-delete-contact .tve-modal-delete-contact").attr("href",e),t(document).on("keyup",(function(a){13===a.which&&(TVE_Dash.showLoader(),t("#tve-leads-delete-contact").closeModal({out_duration:0}),window.location=e)}))}}),!1})),t(".tve-email").click((function(){var a=t(this).attr("data-contact-id"),e=t("#tve-email-address"),n=t("#tve-save-email").is(":checked");""!=e.attr("data-default-value")?e.val(e.attr("data-default-value")).next().addClass("tvd-active"):n||e.val(""),t("#tve-contact-id").val(a),t("#tve-email-response").html("").removeClass(),t("#tve-email-lb").openModal({})})),t(".tve-send-email").click((function(){var a={id:t("#tve-contact-id").val(),save_email:t("#tve-save-email").is(":checked")?1:0,email_address:t("#tve-email-address").val()},e=t("#tve-email-response");""!=a.email_address?t.ajax({method:"POST",url:ajaxurl,dataType:"json",data:{action:"thrive_leads_backend_ajax",route:"contacts",actionType:"send-email",data:a,security:ThriveLeadsConst.security}}).done((function(t){e.html(t.response).removeClass().addClass("tve-"+t.type)})):e.html("Invalid Email.").removeClass().addClass("tve-error")}))}))})();