window.ThriveLeads=window.ThriveLeads||{},ThriveLeads.objects={},ThriveLeads.const=ThriveLeadsConst,ThriveLeads.ajaxModal=function(e){if(!e.view&&!e.onLoad)throw new Error("missing view constructor or onLoad property");TVE_Dash.showLoader();var a=_.extend({type:"get"},e);jQuery.ajax(a).done((function(a){if("function"==typeof e.onLoad)return e.onLoad.call(null);var s=TVE_Dash._instantiate(e.view,e);s.template=_.template(a),s.render().open(e)})).always((function(){TVE_Dash.hideLoader()}))},ThriveLeads.resize_thickbox=function(){var e,a=90*jQuery(window).height()/100,s=jQuery("#TB_window"),r=s.find("#TB_ajaxContent"),i=40;r.children().each((function(){var e=jQuery(this);if(e.is("script")||e.is("style")||!e.is(":visible"))return!0;i+=e.outerHeight(!0)})),e=(i=Math.min(i,a-100))+100,r.css("max-height",a-100+"px").animate({height:i},200),s.animate({top:"50%",marginTop:-e/2,height:i+100},200)},ThriveLeads.roundNumber=function(e,a){var s=Math.pow(10,a);return Math.round(e*s)/s},ThriveLeads.conversion_rate=function(e,a,s){if(e=parseInt(e),a=parseInt(a),!e||isNaN(e)||!a||isNaN(a))return"N/A";s=void 0===s?"%":"";var r=ThriveLeads.roundNumber(a/e*100,3).toFixed(2);return r+(s&&!isNaN(r)?" "+s:"")},ThriveLeads.addMessage=function(e,a){ThriveLeads.objects.messages.add(e),a&&a.call(null)},ThriveLeads.addErrorMessage=function(e,a){var s=new ThriveLeads.models.Message({status:"error",text:e});return ThriveLeads.addMessage(s,a)},ThriveLeads.addSuccessMessage=function(e,a){var s=new ThriveLeads.model.Message({status:"success",text:e});return ThriveLeads.addMessage(s,a)},ThriveLeads.addFailCallback=function(e,a){e.fail((function(s){ThriveLeads.addErrorMessage(s.responseText,ThriveLeads.displayMessages),TVE_Dash.hideLoader(),e.failed=!0,void 0!==a&&a.close&&a.close()}))},ThriveLeads.displayMessages=function(){ThriveLeads.objects.messages.each((function(e){TVE_Dash["success"===e.get("status")?"success":"err"](e.get("text"))})),ThriveLeads.objects.messages.reset()},ThriveLeads.errorHandler=function(e,a,s,r){ThriveLeads.addMessage({text:s.responseText,status:"error"}),ThriveLeads.router.navigate(e,{trigger:!0})},ThriveLeads.bindZClip=function(e){TVE_Dash.bindZClip(e)},ThriveLeads.ajaxurl=function(e){return e&&e.length?(e=e.replace(/^(\?|&)/,""),ajaxurl+(-1!==ajaxurl.indexOf("?")?"&":"?")+e):ajaxurl},ThriveLeads.validateInputField=function(e){e.removeClass("tvd-invalid"),""==e.val()&&e.addClass("tvd-invalid")};