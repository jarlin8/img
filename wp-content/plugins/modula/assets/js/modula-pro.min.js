function modula_pro_get_url_parameters(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||!1}function modulacheckDevice(a){if("undefined"!=typeof a){var b=!0;return"undefined"!=typeof a.lightbox_devices&&"both"!==a.lightbox_devices&&(b="mobile"==a.lightbox_devices?1024>jQuery(window).width():1024<jQuery(window).width()),b}return!1}!function(a){"use strict";function b(a){this.instance=a,this.filter="*",this.hiddenItems=a.$element.find(".hidden-items .modula-hidden-item"),this.instance.options.haveFilters&&this.initFilters(),"fancybox"==this.instance.options.lightbox&&this.initLightbox()}b.prototype.initLightbox=function(){var b,c,d,e=this,f=e.instance,g=!1,h=!1;f.$element.on("click",".modula-item-link:not( .modula-simple-link )",function(b){b.preventDefault();var g=f.$items.filter(e.filter).filter(":not( .modula-simple-link )"),i=jQuery.map(g,function(a){var b=jQuery(a).find(".modula-item-link"),c=jQuery(a).find(".pic");return{src:b.attr("href"),opts:{$thumb:c.parents(".modula-item"),caption:b.data("caption"),alt:c.attr("alt"),thumb:b.attr("data-thumb"),image_id:b.attr("data-image-id")}}}),j=a(this).parent().find("img.pic");if(e.hiddenItems.length>0){var k=jQuery.map(e.hiddenItems.filter(e.filter),function(a){var b=jQuery(a);return{src:b.attr("href"),opts:{caption:b.data("caption"),alt:"",thumb:b.attr("data-thumb"),image_id:b.attr("data-image-id")}}});i=i.concat(k)}var l=g.index(jQuery(this).parents(".modula-item"));f.options.lightboxOpts.beforeLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_load",[f,this])},f.options.lightboxOpts.afterLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_load",[f,this])},f.options.lightboxOpts.beforeShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_show",[f,this])},f.options.lightboxOpts.afterShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_show",[f,this])},f.options.lightboxOpts.beforeClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_close",[f,this])},f.options.lightboxOpts.afterClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_close",[f,this])},f.options.lightboxOpts.onInit=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_init",[f,this])},f.options.lightboxOpts.onActivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_activate",[f,this])},f.options.lightboxOpts.onDeactivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_deactivate",[f,this])},modulacheckDevice(f.options)&&(f.options.mobileDoubleClick&&1024>a(window).width()?(h?(clearTimeout(c),h=!1,d&&d.is(j)&&jQuery.modulaFancybox.open(i,f.options.lightboxOpts,l)):(h=!0,c=setTimeout(function(){h=!1},300)),d=j):jQuery.modulaFancybox.open(i,f.options.lightboxOpts,l))}),"undefined"!=typeof f.options.copyCaptionMobile&&"1"==f.options.copyCaptionMobile&&jQuery(document).on("click","html body .modula-fancybox-container.modula-lightbox-"+f.element.id+" .modula-fancybox-caption__body",function(c){if(g){clearTimeout(b),g=!1;var d=a("<input id='modula-temp-field'>");a("body").append(d),d.val(a(this).text()).select(),document.execCommand("copy"),d.remove()}else g=!0,b=setTimeout(function(){g=!1},300)})},b.prototype.initFilters=function(){var b=this,c=b.instance;"undefined"!=typeof c.options.defaultActiveFilter&&("All"==c.options.defaultActiveFilter?b.filter="*":b.filter=".jtg-filter-"+c.options.defaultActiveFilter);var d=modula_pro_get_url_parameters("jtg-filter");d&&(b.filter=".jtg-filter-"+d);var e=c.options.dropdownFilters;"1"==e?c.$element.on("change",".filters",function(a){if(!jQuery(this).hasClass("modula_menu__item--current"))if(b.filter=".jtg-filter-"+this.value,c.$element.find(".filters .modula_menu__item--current").removeClass("modula_menu__item--current"),c.$element.find(".filters option[value='"+this.value+"']").addClass("modula_menu__item--current").prop("selected","selected"),c.isIsotope){if(c.$items.removeClass("jtg-hidden"),c.$items.not(b.filter).addClass("jtg-hidden"),c.reset(),c.$itemsCnt.modulaisotope({filter:b.filter}).modulaisotope("layout"),"creative-gallery"==c.options.type&&c.$items.not(".jtg-hidden").each(function(a,b){c.placeImage(a)}),"custom-grid"==c.options.type){var d,e=c.$element.find(".modula-items").width(),f=c.options.columns;d=c.options.gutter>0?(e-c.options.gutter*(f-1))/f:Math.floor(e/f*1e3)/1e3,c.$items.not(".jtg-hidden").each(function(a,b){c.placeImage(a)})}}else c.$itemsCnt.justifiedGallery({filter:b.filter})}):c.$element.on("click",".filters a",function(d){if("0"!=c.options.filterClick)return!0;if(d.preventDefault(),!jQuery(this).parent().hasClass("modula_menu__item--current"))if(b.filter=".jtg-filter-"+jQuery(this).data("filter"),c.$element.find(".filters .modula_menu__item--current").removeClass("modula_menu__item--current"),c.$element.find(".filters a[data-filter='"+jQuery(this).attr("data-filter")+"']").parent().addClass("modula_menu__item--current"),c.isIsotope){if(c.$items.removeClass("jtg-hidden"),c.$items.not(b.filter).addClass("jtg-hidden"),c.reset(),c.$itemsCnt.modulaisotope({filter:b.filter}).modulaisotope("layout"),"creative-gallery"==c.options.type&&c.$items.not(".jtg-hidden").each(function(b,d){var e=c.tiles[b];a(d).data("size",e),a(d).addClass("tiled").addClass(e.width>e.height?"tile-h":"tile-v").data("position"),a(d).css({width:e.width,height:e.height}),a(d).find(".figc").css({width:e.width,height:e.height}),c.loadImage(b)}),"custom-grid"==c.options.type){var e,f=c.$element.find(".modula-items").width(),g=c.options.columns;e=c.options.gutter>0?(f-c.options.gutter*(g-1))/g:Math.floor(f/g*1e3)/1e3,c.$items.not(".jtg-hidden").each(function(b,d){var f,h,i,j,k={};f=a(d).data("width"),h=a(d).data("height"),f>12&&(f=12),"1"==c.options.enableResponsive&&(i=f,j=h,1==g?(f=1,h=f*j/i):(f=Math.round(g*i/12),1>f&&(f=1),h=Math.round(f*j/i),1>h&&(h=1))),k.width=e*f+c.options.gutter*(f-1),k.height=Math.round(e)*h+c.options.gutter*(h-1),a(d).data("size",k).addClass("tiled").addClass(k.width>k.height?"tile-h":"tile-v").data("position"),a(d).css(a(d).data("size")),a(d).find(".figc").css({width:a(d).data("size").width,height:a(d).data("size").height}),c.loadImage(b)})}}else c.$itemsCnt.justifiedGallery({filter:b.filter})}),c.$element.find(".filter-by-wrapper").click(function(){var a=jQuery(this);c.$element.find(".filters").hasClass("active")?(c.$element.find(".filters").hide(600).removeClass("active"),a.removeClass("opened")):(c.$element.find(".filters").show(600).addClass("active"),a.addClass("opened"))}),"*"!=b.filter&&""!=b.filter&&(c.isIsotope?(c.$items.removeClass("jtg-hidden"),c.$items.not(b.filter).addClass("jtg-hidden"),c.reset(),c.$itemsCnt.modulaisotope({filter:b.filter})):c.$itemsCnt.justifiedGallery({filter:b.filter}))},a(document).on("modula_api_after_init",function(a,c){new b(c)})}(jQuery);