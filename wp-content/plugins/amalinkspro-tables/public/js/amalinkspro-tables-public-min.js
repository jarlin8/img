!function(a){"use strict";jQuery(document).ready(function(a){if(a(".amalinkspro-comparison-table-public.alp-no-noapi").length&&a(".amalinkspro-comparison-table.alp-no-noapi").each(function(t,e){var i=a(this);i.find("tbody").length&&(i.hasClass("alp-simple-table")||i.footable())}),a(".amalinkspro-comparison-table-public.alp-load-api").length?a(".amalinkspro-comparison-table-public.alp-load-api").each(function(t,e){var i=a(this),r,l={action:"alp_paapi5_get_asin_groups_data",asins:i.attr("dala-all-asins"),aff_id:""};a.ajax({type:"POST",url:ajaxurl,data:l,success:function(t){function e(a){try{JSON.parse(a)}catch(a){return!1}return!0}if(t&&e(t)){var r,l=JSON.parse(t);console.log("alp_api5_asins: "),console.log(l),i.find("tbody tr").each(function(t){var e=a(this),i=e.attr("alp-data-asin");l[i]&&e.find("td").each(function(t){if("image"===a(this).attr("data-alp-table-td-type")){if(l[i].title)var e=l[i].title;else var e="Product Image";var r=a(this).attr("data-img-id");if(l[i])if("medium"===r&&l[i].primaryImgUrlMd&&e)var s='<img src="'+l[i].primaryImgUrlMd+'" alt="'+e+'" />';else if("small"===r&&l[i].primaryImgUrlSm&&e)var s='<img src="'+l[i].primaryImgUrlSm+'" alt="'+e+'" />';else if("large"===r&&l[i].primaryImgUrlLg&&e)var s='<img src="'+l[i].primaryImgUrlLg+'" alt="'+e+'" />';else if(l[i].imgVariants){if(l[i].imgVariants[r]&&l[i].imgVariants[r].md)var s='<img src="'+l[i].imgVariants[r].md+'" alt="'+e+'" />';else if(l[i].imgVariants[r]&&l[i].imgVariants[r].sm)var s='<img src="'+l[i].imgVariants[r].sm+'" alt="'+e+'" />'}else var s="N/A";else var s="N/A";a(this).find("icon-amalinkspro-spin3").remove(),a(this).prepend(s)}else if("price-offer"===a(this).attr("data-alp-table-td-type")||"price-list"===a(this).attr("data-alp-table-td-type")){if(l[i]&&l[i].offerDisplay)var s='<span class="alp-price-offer">'+l[i].offerDisplay+"</span>";else var s='<span class="alp-no-price">$</span>';a(this).find("icon-amalinkspro-spin3").remove(),a(this).prepend(s)}else if("price-lowest-new-price"===a(this).attr("data-alp-table-td-type")){var s="N/A";a(this).find("icon-amalinkspro-spin3").remove(),a(this).prepend(s)}else if("price-lowest-used-price"===a(this).attr("data-alp-table-td-type")){var s="N/A";a(this).find("icon-amalinkspro-spin3").remove(),a(this).prepend(s)}var n=a(this).closest("tr").attr("data-row-url");a(this).find(".alp-td-cover").length&&""!==n?a(this).find(".alp-td-cover").attr("href",n):a(this).find(".alp-td-cover").attr("href",l[i].detailPageURL)})})}},complete:function(t){console.log("table loaded complete."),a("i.icon-amalinkspro-spin3").remove(),i.find("tbody").length&&(i.hasClass("alp-simple-table")||i.footable());var e=new Date,r=new Date;if(r){var l=r.getHours(),s=r.getMinutes(),n=r.getDate(),o=r.getMonth()+1,p=r.getFullYear(),c="AM";l>=12&&(c="PM",l-=12),0==l&&(l=12),s<10&&(s="0"+s),a(".amalinkspro-table-prices-accuracy-date").text(o+"/"+n+"/"+p+" "+l+":"+s+" "+c)}}})}):(a("i.icon-amalinkspro-spin3").remove(),a("td[data-alp-table-td-type=price-offer]").html('<span class="alp-no-price">$</span>')),a(".alp-table-links-addtocart").length&&!a("#alp-amazon_addtocart_form").length){var t={action:"amazon_add_to_cart_setup"};a.ajax({type:"POST",url:ajaxurl,data:t,success:function(t){a("body").append(t)}})}a("body").on("click","table.alp-table-links-addtocart tbody a",function(t){var e=a(this).closest("tr").attr("alp-data-asin");""!==e&&(t.preventDefault(),console.log("test 1"),a("#alp-amazon_addtocart_form").find(".alp-asin").attr("value",e),a(this).closest("table.alp-table-links-newwindow").length&&a("#alp-amazon_addtocart_form").attr("target","_blank"),a("#alp-amazon_addtocart_form").delay(300).submit())})})}(jQuery);